{% extends 'OnlyGlassWebApp/base.html' %}
{% load static %}

{% block content %}
<section class="page-section" style="padding: 0;">
  <div class="container-fluid" style="padding-left: 0; padding-right: 0;">
    <h2 class="section-heading mb-4 text-center">
      {% if mostrar_todos %}
        {{ t.ver_todos_proyectos }}
      {% else %}
        {{ categoria.nombre }}
      {% endif %}
    </h2>
    <div class="d-flex flex-wrap justify-content-start" style="gap: 12px; padding-left: 12px; padding-right: 12px;">
      {% for post in posts %}
        <div style="flex: 1 1 calc(25% - 12px); max-width: calc(25% - 12px); min-width: 280px;"
             {% if post.destacado %}id="post-destacado"{% endif %}>
          <div class="card h-100 shadow-sm {% if post.destacado %}border-primary border-2{% endif %}">
            {% if post.imagen %}
              <img src="{{ post.imagen.url }}" alt="{{ post.titulo }}"
                   class="card-img-top"
                   style="height: 650px; object-fit: cover;">
            {% endif %}
            <div class="card-body">
              <h4 class="card-title"><strong>{{ post.titulo }}</strong></h4>
              <p class="card-text">{{ post.contenido_mostrar }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<section>
  <div class="text-center mx-auto" style="width: 75%; padding: 20px 0;">
    <a href="{% url 'home' %}" class="btn btn-primary mt-2">‚Üê {{ t.inicio }}</a>
  </div>
</section>

{% if post_id_destacado %}
<style>
#post-destacado .card {
    animation: destacar 2s ease-in-out;
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
}

@keyframes destacar {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const postDestacado = document.getElementById('post-destacado');
    if (postDestacado) {
        setTimeout(function() {
            postDestacado.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center'
            });
        }, 500);
    }
});
</script>
{% endif %}
{% endblock %}